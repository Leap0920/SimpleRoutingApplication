@{
    ViewBag.Title = "Students";
}

<div class="container py-5">
    <!-- Page Header -->
    <div class="text-center mb-5">
        <h1 class="fw-bold text-primary display-5">@ViewBag.Message</h1>
        <p class="text-muted fs-5">SBIT-3C — Enrolled Students</p>
    </div>

    <!-- Card Wrapper -->
    <div class="card shadow-sm border-0 rounded-4">
        <div class="card-body p-4">

            <!-- Search Bar -->
            <div class="row mb-4">
                <div class="col-md-6 mb-2">
                    <input id="searchInput" type="text" class="form-control form-control-lg" placeholder="🔍 Search student...">
                </div>
            </div>

            <!-- Table -->
            <div class="table-responsive">
                <table class="table table-hover align-middle" id="studentsTable">
                    <thead class="table-light">
                        <tr>
                            <th scope="col" class="text-primary sortable" data-sort="number">Student #</th>
                            <th scope="col" class="text-primary sortable" data-sort="name">Name</th>
                            <th scope="col" class="text-primary">Course</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>23-2735</td><td>Jane Abalos</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2565</td><td>Ashley Alberio</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2186</td><td>Ahmad Hussien Ambinoc</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2282</td><td>John Vincent Aresgar</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2681</td><td>Trixcie Barroga</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2365</td><td>Jiro Beringuela</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2225</td><td>Sarah Mae Calexterio</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-1874</td><td>Kurt Francis Caspero</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-1932</td><td>Vennidict Cruz</td><td>SBIT-IT3C</td></tr>
                        <tr><td>23-2056</td><td>Arwin Josh Decena</td><td>SBIT-IT3C</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script>
    const searchInput = document.getElementById("searchInput");
    const rows = document.querySelectorAll("#studentsTable tbody tr");
    let sortDirection = { name: 1, number: 1 };

    // Live Search
    searchInput.addEventListener("keyup", () => {
        const searchValue = searchInput.value.toLowerCase();
        rows.forEach(row => {
            row.style.display = row.innerText.toLowerCase().includes(searchValue) ? "" : "none";
        });
    });

    // Sorting
    document.querySelectorAll(".sortable").forEach(header => {
        header.style.cursor = "pointer";
        header.addEventListener("click", () => {
            const sortType = header.dataset.sort;
            sortTable(sortType);
        });
    });

    function sortTable(type) {
        const tbody = document.querySelector("#studentsTable tbody");
        const sortedRows = Array.from(rows).sort((a, b) => {
            let valA = a.cells[type === "number" ? 0 : 1].innerText;
            let valB = b.cells[type === "number" ? 0 : 1].innerText;
            if (type === "number") {
                return (parseInt(valA) - parseInt(valB)) * sortDirection[type];
            } else {
                return valA.localeCompare(valB) * sortDirection[type];
            }
        });
        sortDirection[type] *= -1; // toggle direction
        sortedRows.forEach(row => tbody.appendChild(row));
    }
</script>

<style>
    #studentsTable tbody tr {
        transition: background-color 0.2s ease, transform 0.2s ease;
    }

        #studentsTable tbody tr:hover {
            background-color: #f8f9fa;
            transform: scale(1.01);
        }
</style>